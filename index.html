<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدخال بيانات الجدول الاقتصادي</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* إضافة خط عربي مناسب يدعم تايلويند */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Cairo:wght@400;700&display=swap');
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #f4f7f9;
        }

        /* تنسيق الجدول */
        th, td {
            border: 1px solid #c8d9e6;
            padding: 4px;
            text-align: center;
            vertical-align: middle;
        }

        /* تنسيق خلايا الرأس الرئيسية */
        thead th {
            background-color: #5d98cf; /* لون أزرق غامق */
            color: white;
            font-weight: 700;
            font-size: 0.85rem;
            line-height: 1.2;
        }
        
        /* لون خلفية خلايا الإدخال (برتقالي فاتح) */
        tbody td:not(:nth-child(2)):not(:nth-child(3)) {
            background-color: #ffe0c2; 
        }

        /* تنسيق المدخلات داخل الجدول */
        .data-input {
            width: 100%;
            height: 100%;
            padding: 4px;
            border: none;
            outline: none;
            background-color: transparent;
            text-align: center;
            font-size: 0.9rem;
        }
        
        /* تنسيق الخلايا الثابتة (السلع والوحدات) */
        .fixed-cell {
            background-color: #e6f0f5 !important;
            font-weight: 600;
        }

        /* تنسيق زر الإرسال */
        .submit-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="p-4 sm:p-8">

<div id="app-container" class="max-w-7xl mx-auto bg-white shadow-xl rounded-lg p-4">
    <h1 class="text-xl sm:text-2xl font-bold text-center mb-6 text-blue-800 border-b-4 border-blue-500 pb-2">
        جدول 1 يوضح المردود الاقتصادي الإيجابي للمستفيدين من نجاح المشروع
    </h1>

    <div class="overflow-x-auto">
        <table id="data-table" class="min-w-full">
            <thead>
                <tr>
                    <th rowspan="3" class="w-[3%]">م</th>
                    <th rowspan="3" class="w-[10%]">السلع الأساسية</th>
                    <th rowspan="3" class="w-[7%]">الوحدة</th>
                    <th colspan="7">الأسعار</th>
                    <th colspan="2">زمن الوصول الى السوق</th>
                </tr>
                <tr>
                    <th colspan="3">قبل التدخل</th>
                    <th colspan="2">فارق الأسعار</th>
                    <th colspan="2">بعد التدخل</th>
                    <th rowspan="2">قبل التدخل (دقيقة)</th>
                    <th rowspan="2">بعد التدخل (دقيقة)</th>
                </tr>
                <tr>
                    <th class="w-[7%]">السعر في أقرب سوق</th>
                    <th class="w-[7%]">السعر في المنطقة</th>
                    <th class="w-[7%]">فارق التكلفة</th>
                    <th class="w-[7%]">الفارق المتوقع</th>
                    <th class="w-[7%]">فارق الكلفة</th>
                    <th class="w-[7%]">السعر في المنطقة</th>
                    <th class="w-[7%]">السعر في أقرب سوق</th>
                </tr>
            </thead>
            <tbody>
                <!-- بيانات السلع -->
                <tr data-item="قمح"><td class="fixed-cell">1</td><td class="fixed-cell">قمح</td><td class="fixed-cell">كيس</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="دقيق"><td class="fixed-cell">2</td><td class="fixed-cell">دقيق</td><td class="fixed-cell">كيس</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="سكر"><td class="fixed-cell">3</td><td class="fixed-cell">سكر</td><td class="fixed-cell">قطمة 10 ك</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="أرز"><td class="fixed-cell">4</td><td class="fixed-cell">أرز</td><td class="fixed-cell">قطمة 10 ك</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="غاز"><td class="fixed-cell">5</td><td class="fixed-cell">غاز</td><td class="fixed-cell">اسطوانة</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="نقل راكب"><td class="fixed-cell">6</td><td class="fixed-cell">نقل راكب</td><td class="fixed-cell">راكب</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="مشوار أجرة"><td class="fixed-cell">7</td><td class="fixed-cell">مشوار أجرة</td><td class="fixed-cell">رحلة</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="أسمنت"><td class="fixed-cell">8</td><td class="fixed-cell">أسمنت</td><td class="fixed-cell">كيس</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="دبة زيت"><td class="fixed-cell">9</td><td class="fixed-cell">دبة زيت</td><td class="fixed-cell">لتر 4</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="ديزل"><td class="fixed-cell">10</td><td class="fixed-cell">ديزل</td><td class="fixed-cell">دبة 20 لتر</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
                <tr data-item="بنزول"><td class="fixed-cell">11</td><td class="fixed-cell">بنزول</td><td class="fixed-cell">دبة 20 لتر</td><td><input type="text" class="data-input" data-field="سعر_سوق_قديم"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_قديم"></td><td><input type="text" class="data-input" data-field="فارق_متوقع"></td><td><input type="text" class="data-input" data-field="فارق_كلفة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_منطقة_جديد"></td><td><input type="text" class="data-input" data-field="سعر_سوق_جديد"></td><td><input type="text" class="data-input" data-field="زمن_قديم"></td><td><input type="text" class="data-input" data-field="زمن_جديد"></td></tr>
            </tbody>
        </table>
    </div>

    <div class="flex justify-center mt-8">
        <button id="submitBtn" class="submit-btn bg-green-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-300">
            الموافقة على الإدخال وإرسال البيانات
        </button>
    </div>

    <!-- رسالة عرض البيانات المجمعة -->
    <div id="outputMessage" class="mt-6 p-4 bg-gray-100 border-l-4 border-blue-500 text-gray-700 rounded-md hidden">
        <h3 class="font-semibold text-lg text-blue-700 mb-2">تم جمع البيانات بنجاح:</h3>
        <pre id="outputData" class="whitespace-pre-wrap text-sm"></pre>
        <p class="mt-2 text-sm text-red-600">
            * ملاحظة: في تطبيق الويب الفعلي، سيتم إرسال هذه البيانات إلى خادم (قاعدة بيانات) بدلاً من عرضها هنا.
        </p>
    </div>

</div>

<script>
    // JavaScript لجمع البيانات عند الضغط على الزر

    // ربط زر الإرسال بالدالة
    document.getElementById('submitBtn').addEventListener('click', collectData);

    function collectData() {
        // نختار جميع صفوف البيانات في الجدول (باستثناء الرأس)
        const rows = document.querySelectorAll('#data-table tbody tr');
        const collectedData = [];
        
        // حقول البيانات بالترتيب لتسهيل عرضها
        const fieldsMapping = {
            'سعر_سوق_قديم': 'السعر في أقرب سوق (قبل)',
            'سعر_منطقة_قديم': 'السعر في المنطقة (قبل)',
            'فارق_كلفة_قديم': 'فارق التكلفة (قبل)',
            'فارق_متوقع': 'الفارق المتوقع',
            'فارق_كلفة_جديد': 'فارق الكلفة (بعد)',
            'سعر_منطقة_جديد': 'السعر في المنطقة (بعد)',
            'سعر_سوق_جديد': 'السعر في أقرب سوق (بعد)',
            'زمن_قديم': 'زمن الوصول (قبل/دقيقة)',
            'زمن_جديد': 'زمن الوصول (بعد/دقيقة)'
        };

        rows.forEach(row => {
            const item = row.getAttribute('data-item');
            const itemData = { 'السلعة الأساسية': item };
            
            // نختار كل حقول الإدخال (inputs) داخل هذا الصف
            const inputs = row.querySelectorAll('.data-input');
            
            inputs.forEach(input => {
                const fieldKey = input.getAttribute('data-field');
                const value = input.value.trim();

                // نستخدم التعيين لاسم حقل واضح
                const fieldName = fieldsMapping[fieldKey] || fieldKey;
                
                itemData[fieldName] = value;
            });
            
            collectedData.push(itemData);
        });

        // ----------------------------------------------------
        // **معالجة وعرض البيانات (لغرض المعاينة فقط):**
        // ----------------------------------------------------
        
        const outputDiv = document.getElementById('outputMessage');
        const outputPre = document.getElementById('outputData');

        // تحويل البيانات إلى تنسيق JSON للقراءة
        outputPre.textContent = JSON.stringify(collectedData, null, 2);
        outputDiv.classList.remove('hidden');

        // يمكن هنا إضافة رسالة تنبيه مرئية بدلاً من alert
        // مثلاً: showSuccessMessage('تم جمع البيانات بنجاح!');
        
        console.log('Collected Data:', collectedData);

        // **للإرسال الفعلي إلى قاعدة بيانات:**
        // هنا يمكنك إضافة دالة لإرسال "collectedData" إلى خادم باستخدام fetch()
        /*
        fetch('YOUR_SERVER_ENDPOINT', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(collectedData)
        })
        .then(response => response.json())
        .then(data => console.log('Success:', data))
        .catch((error) => console.error('Error:', error));
        */
    }
</script>
</body>
</html>
